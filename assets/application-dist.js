let addToCartFormSelector="#add-to-cart-form",productOptionSelector=addToCartFormSelector+" [name*=option]",productForm={onProductOptionChanged:function(t){let e=$(this).closest(addToCartFormSelector),n=productForm.getActiveVariant(e);e.trigger("form:change",[n])},getActiveVariant:function(t){let e=JSON.parse(decodeURIComponent(t.attr("data-variants"))),n=t.serializeArray(),i={option1:null,option2:null,option3:null},o=null;return $.each(n,(function(t,e){-1!==e.name.indexOf("option")&&(i[e.name]=e.value)})),$.each(e,(function(t,e){if(e.option1===i.option1&&e.option2===i.option2&&e.option3===i.option3)return o=e,!1})),o},validate:function(t,e){let n,i,o=$(this),a=null!==e,r=a&&e.inventory_quantity>0,c=o.find(".js-variant-id"),s=o.find("#add-to-cart-button"),d=o.find(".js-price");$emailButton=o.find("#mhaRnProduct"),a?(n="$"+(e.price/100).toFixed(2),i='<span class="money">'+n+"</span>",window.history.replaceState(null,null,"?variant="+e.id)):i=d.attr("data-default-price"),r?(c.val(e.id),s.prop("disabled",!1),$emailButton.css("display","none")):(c.val(""),s.prop("disabled",!0),$emailButton.css("display","block"),i='<span class="money">Out of Stock</span>'),d.html(i),currencyPicker.onMoneySpanAdded()},init:function(){$(document).on("change",productOptionSelector,productForm.onProductOptionChanged),$(document).on("form:change",addToCartFormSelector,productForm.validate)}};productForm.init();let miniCartContentsSelector=".js-mini-cart-contents",ajaxify={onAddToCart:function(t){t.preventDefault(),$.ajax({type:"POST",url:"/cart/add.js",data:$(this).serialize(),dataType:"json",success:ajaxify.onCartUpdated,error:ajaxify.onError})},onCartUpdated:function(){$(miniCartContentsSelector+" .js-cart-fieldset").prop("disabled",!0),$.ajax({type:"GET",url:"/cart",context:document.body,success:function(t){let e=$(t).find(".js-cart-page-contents"),n=e.html(),i=e.attr("data-cart-item-count"),o=$(miniCartContentsSelector);$(".js-cart-item-count").text(i),o.html(n),currencyPicker.onMoneySpanAdded(),parseInt(i)>0?ajaxify.openCart():ajaxify.closeCart()}})},onError:function(t,e){let n=t.responseJSON;alert(n.status+" - "+n.message+": "+n.description)},onCartButtonClick:function(t){let e=$("html").hasClass("mini-cart-open");-1!==window.location.href.indexOf("/cart")||(t.preventDefault(),e?ajaxify.closeCart():ajaxify.openCart())},ifMegaMenu:function(){$(".mega-menu-full").is(":visible")&&ajaxify.closeCart()},openCart:function(){$("html").addClass("mini-cart-open")},closeCart:function(){$("html").removeClass("mini-cart-open")},init:function(){$(document).on("submit",addToCartFormSelector,ajaxify.onAddToCart),$(".nav_item").on("mouseover",ajaxify.ifMegaMenu),$(document).on("click",".js-cart-link, .js-keep-shopping",ajaxify.onCartButtonClick)}};ajaxify.init();let quantityFieldSelector=".js-quantity-field",quantityButtonSelector=".js-quantity-button",quantityPickerSelector=".js-quantity-picker",quantityPicker={onButtonClick:function(t){let e=$(this),n=e.closest(quantityPickerSelector).find(".js-quantity-field"),i=parseInt(n.val()),o=n.attr("max")?parseInt(n.attr("max")):null;e.hasClass("plus")&&(null===o||i+1<=o)?n.val(i+1).change():e.hasClass("minus")&&n.val(i-1).change()},onChange:function(t){let e=$(this),n=e.closest(quantityPickerSelector),i=n.find(".js-quantity-text"),o=parseInt(this.value)===parseInt(e.attr("min")),a=parseInt(this.value)===parseInt(e.attr("max")),r=n.find(".js-quantity-button.minus"),c=n.find(".js-quantity-button.plus");i.text(this.value),o?r.prop("disabled",!0):!0===r.prop("disabled")&&r.prop("disabled",!1),a?c.prop("disabled",!0):!0===c.prop("disabled")&&c.prop("disabled",!1)},init:function(){$(document).on("click",quantityButtonSelector,quantityPicker.onButtonClick),$(document).on("change",quantityFieldSelector,quantityPicker.onChange)}};quantityPicker.init();let removeLineSelector=".js-remove-line",lineQuantitySelector=".js-line-quantity",lineItem={isInMiniCart:function(t){return 0!==$(t).closest(miniCartContentsSelector).length},onLineQuantityChanged:function(t){let e={quantity:this.value,id:$(this).attr("id").replace("updates_","")};lineItem.isInMiniCart(this)&&$.post("/cart/change.js",e,ajaxify.onCartUpdated,"json")},onLineRemoved:function(t){if(lineItem.isInMiniCart(this)){t.preventDefault();let e=$(this).attr("href").split("change?")[1];$.post("/cart/change.js",e,ajaxify.onCartUpdated,"json")}},init:function(){$(document).on("click",removeLineSelector,lineItem.onLineRemoved),$(document).on("change",lineQuantitySelector,lineItem.onLineQuantityChanged)}};function quickView(){$(".quick-view").click((function(){0==$("#quick-view").length&&$("body").append('<div id="quick-view"></div>');var t=$(this).data("handle");$("#quick-view").addClass(t),jQuery.getJSON("/products/"+t+".js",(function(e){var n=e.title,i=e.type,o=0,a=0,r=e.description,c=e.images,s=(e.variants,e.options),d="/products/"+t;$(".qv-product-title").text(n),$(".qv-product-type").text(i),$(".qv-product-description").html(r),$(".view-product").attr("href",d);var l=$(c).length;$(c).each((function(t,e){if(t==l-1){var n='<div><img src="'+e+'"></div>';n=n.replace(".jpg","_800x.jpg").replace(".png","_800x.png"),$(".qv-product-images").append(n),$(".qv-product-images").slick({dots:!1,arrows:!1,respondTo:"min",useTransform:!1}).css("opacity","1")}else n=(n='<div><img src="'+e+'"></div>').replace(".jpg","_800x.jpg").replace(".png","_800x.png"),$(".qv-product-images").append(n)})),$(s).each((function(t,e){var n=e.name;n.toLowerCase();$(".qv-product-options").append('<div class="option-selection-'+n.toLowerCase()+'"><span class="option">'+n+'</span><select class="option-'+t+" option "+n.toLowerCase()+'"></select></div>'),$(e.values).each((function(t,e){$(".option."+n.toLowerCase()).append('<option value="'+e+'">'+e+"</option>")}))})),$(e.variants).each((function(t,e){return 0==e.inventory_quantity?($(".qv-add-button").prop("disabled",!0).val("Sold Out"),$(".qv-add-to-cart").hide(),$(".qv-product-price").text("Sold Out").show(),!0):(o=parseFloat(e.price/100).toFixed(2),a=parseFloat(e.compare_at_price/100).toFixed(2),$(".qv-product-price").text("$"+o),a>0?$(".qv-product-original-price").text("$"+a).show():$(".qv-product-original-price").hide(),$("select.option-0").val(e.option1),$("select.option-1").val(e.option2),$("select.option-2").val(e.option3),!1)}))})),$(document).on("change","#quick-view select",(function(){var e="";$("#quick-view select").each((function(t){e=""==e?$(this).val():e+" / "+$(this).val()})),jQuery.getJSON("/products/"+t+".js",(function(t){$(t.variants).each((function(t,n){if(n.title==e){var i=parseFloat(n.price/100).toFixed(2),o=parseFloat(n.compare_at_price/100).toFixed(2),a=(n.inventory_quantity,n.inventory_management);$(".qv-product-price").text("$"+i),$(".qv-product-original-price").text("$"+o),null==a?$(".qv-add-button").prop("disabled",!1).val("Add to Cart"):n.inventory_quantity<1?$(".qv-add-button").prop("disabled",!0).val("Sold Out"):$(".qv-add-button").prop("disabled",!1).val("Add to Cart")}}))}))})),$.fancybox({href:"#quick-view",maxWidth:1040,maxHeight:600,fitToView:!0,width:"75%",height:"70%",autoSize:!1,closeClick:!1,openEffect:"none",closeEffect:"none",beforeLoad:function(){var t=$("#quick-view").attr("class");$(document).on("click",".qv-add-button",(function(){var e=$(".qv-quantity").val(),n="",i="";$("#quick-view select").each((function(t){n=""==n?$(this).val():n+" / "+$(this).val()})),jQuery.getJSON("/products/"+t+".js",(function(t){$(t.variants).each((function(t,o){o.title==n&&(i=o.id,jQuery.post("/cart/add.js",{quantity:e,id:i},null,"json").done((function(){$(".qv-add-to-cart-response").addClass("success").html("<span>"+$(".qv-product-title").text()+' has been added to your cart. <a href="/cart">Click here to view your cart.</a>')})).fail((function(t){var e=t.responseJSON;$(".qv-add-to-cart-response").addClass("error").html("<span><b>ERROR: </b>"+e.description)})))}))}))})),$(".fancybox-wrap").css("overflow","hidden !important")},afterShow:function(){$("#quick-view").hide().html(content).css("opacity","1").fadeIn((function(){$(".qv-product-images").addClass("loaded")}))},afterClose:function(){$("#quick-view").removeClass().empty()}})}))}lineItem.init(),$(window).resize((function(){$("#quick-view").is(":visible")&&$(".qv-product-images").slick("setPosition")})),quickView();var crossellingSection=function(){var t=document.querySelector(".crosselling-section");if(null!==t){var e=t.dataset.baseUrl,n=t.dataset.productId,i=e+"?section_id=product-recommendations&limit="+t.dataset.limit+"&product_id="+n+" .product-recommendations";console.log(i),$(t).load(i)}};crossellingSection();